* svn
https://112.74.129.241/svn/miqu/php
https://112.74.129.241/svn/miqu/开发文档
chenhang:CHsvnPHP


* backend
http://120.25.2.34/miqu/backend/web/index.php
devin:adminadmin


* test server
120.25.2.34 
port:22
root:mtxljYUXT8)7^&*(:7


* redis command

redis-cli -h localhost -p port
localhost:port>auth qzone111


* 
102680 -- qq -man
102681 -- weixin -women


* protobuf console debug
LoggerUtils::info("GiftInfo {$GiftInfo} ",'giveGift.log');
LoggerUtils::info('||'.json_encode($GiftInfo).__LINE__,"giveGift.log");


* 查看错误
http://120.25.2.34/miqu/log.html

* protobuf 编译
php protoc-php.php miqu.proto


* redis 建 key 的规则

数据库名：业务名：具体逻辑名
miqu:matchlove:bmatchset:



## match b program doing now...

1. 
CREATE TABLE `m_gifts` (
  `is_broadcast_effects` tinyint(4) DEFAULT '0' COMMENT '是否有广播特效',
  `doublehit_effects_value` int(4) DEFAULT NULL COMMENT '连击弹幕特效成立数值',
  `is_top_broadcast` tinyint(4) DEFAULT '0' COMMENT '是否是消息置顶广播',
  `sort` int(11) DEFAULT NULL COMMENT '排序值',
  `animation_play_duration` int(11) DEFAULT '0' COMMENT '毫秒',
  `gift_info_type` int(11) DEFAULT '1' COMMENT '礼物信息类型 1:普通礼物 2:vip礼物 3:表白礼物 4:分手礼物 5:祝福礼物 6:语音房间礼物 7:房间免费一次的礼物',
  `broadcast_value` int(11) DEFAULT '50000' COMMENT '普通广播达到的累计值(price*num)',
  `top_broadcast_value` int(11) DEFAULT '250000' COMMENT '置顶广播达到的值(price*num)',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=500002 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='礼物表';


4. where the value come from ?? incredible...
$GiftInfo = new \GiftInfo();
$GiftInfo->setGiftId($gift_id);
$GiftListRecord->setGiftInfo($GiftInfo);


/**
     * Sets value of 'giftInfo' property
     *
     * @param GiftInfo $value Property value
     *
     * @return null
     */
    public function setGiftInfo(GiftInfo $value)
    {
        return $this->set(self::GIFTINFO, $value);
    }


5. how to run between this three ??

C:\Users\admin\Desktop\svnfiles\trunk\vendor\yiisoft\yii2\db\Query.php
C:\Users\admin\Desktop\svnfiles\trunk\vendor\yiisoft\yii2\db\Command.php
C:\Users\admin\Desktop\svnfiles\trunk\vendor\yiisoft\yii2\db\Query.php


6. ??
public static function hmget($redis_source, $key, $fields)
    {
        $redis = self::getReadRedis($redis_source);
        array_unshift($fields, $key);
        return $redis->executeCommand('HMGET', $fields);
    }





7. 一起有四种协议

url=>http

protobuf

js=>webview（基于 h5）
(这里面就有两种情况：一般的页面，打开相机)
C:\Users\admin\Desktop\svnfiles\trunk\frontend\web\assets\comm\js\app.js


chatmsg=>环信（也就是聊天，系统通知，广播等。。）
C:\Users\admin\Desktop\svnfiles\trunk\vendor\emchat\EasemobV3.php


8. 通知喜欢，基本结束，
问题是：
1. 通知信息要改
2. model 要转到 matchchlovebchdao 中去。。

9. 不能用var_dump，可是这一段并没有被执行呀？？

10.






## work
0. 目前的版本就是在测试中。。

1. 喜欢你的人，返回的数据, 具体是 json 的什么格式？，返回的数据有五项哦。。

2. 后台管理系统。。

3. 莫问题，在上报聊天的时候，记录信息。。

4. 军的匹配逻辑写在哪。。